specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: Loans
    network: ropsten
    source:
      address: "0x913b86eAAABaF9B291Ae7D0F7A63a89b9E459d1b"
      abi: Loans
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - CollateralDeposited
        - CollateralWithdrawn
        - LoanCreated
        - SignerAdded
        - SignerRemoved
      abis:
        - name: Loans
          file: ./abis/Loans.json
      eventHandlers:
        - event: CollateralDeposited(indexed uint256,indexed address,uint256)
          handler: handleCollateralDeposited
        - event: CollateralWithdrawn(indexed uint256,indexed address,uint256)
          handler: handleCollateralWithdrawn
        - event: LoanCreated(indexed uint256,indexed address,uint256,uint256,uint256,uint256)
          handler: handleLoanCreated
        - event: SignerAdded(indexed address)
          handler: handleSignerAdded
        - event: SignerRemoved(indexed address)
          handler: handleSignerRemoved
      file: ./src/mappings/loansMappings.ts
  - kind: ethereum/contract
    name: LendingPoolInterface
    network: ropsten
    source:
      address: "0xCD3a6d493c04571FBE0ACD9e60634f4cc29fF42a"
      abi: LendingPoolInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - TokenDeposited
        - TokenWithdrawn
        - TokenRepaid
        - PaymentLiquidated
      abis:
        - name: LendingPoolInterface
          file: ./abis/LendingPoolInterface.json
      eventHandlers:
        - event: TokenDeposited(indexed address,uint256)
          handler: handleTokenDeposited
        - event: TokenWithdrawn(indexed address,uint256)
          handler: handleTokenWithdrawn
        - event: TokenRepaid(indexed address,uint256)
          handler: handleDaiRepaid
        - event: PaymentLiquidated(indexed address,uint256)
          handler: handlePaymentLiquidated
      file: ./src/mappings/lendingPools/daiLendingPoolMappings.ts
  - kind: ethereum/contract
    name: ConsensusInterface
    network: ropsten
    source:
      address: "0xCD3a6d493c04571FBE0ACD9e60634f4cc29fF42a"
      abi: ConsensusInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - InterestSubmitted
        - InterestAccepted
      abis:
        - name: ConsensusInterface
          file: ./abis/ConsensusInterface.json
      eventHandlers:
        - event: InterestSubmitted(address,address,uint256,uint256)
          handler: handleInterestSubmitted
        - event: InterestAccepted(address,uint256,uint256)
          handler: handleInterestAccepted
      file: ./src/mappings/consensusMappings.ts
  - kind: ethereum/contract
    name: LendersInterface
    network: ropsten
    source:
      address: "0xCD3a6d493c04571FBE0ACD9e60634f4cc29fF42a"
      abi: LendersInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - AccruedInterestUpdated
        - AccruedInterestWithdrawn
        - InterestUpdateRequested
        - CancelInterestUpdate
      abis:
        - name: LendersInterface
          file: ./abis/LendersInterface.json
      eventHandlers:
        - event: AccruedInterestUpdated(indexed address,uint256,uint256)
          handler: handleAccruedInterestUpdated
        - event: AccruedInterestWithdrawn(indexed address,uint256)
          handler: handleAccruedInterestWithdrawn
        - event: InterestUpdateRequested(indexed address,uint256)
          handler: handleInterestUpdateRequested
        - event: CancelInterestUpdate(indexed address,uint256)
          handler: handleCancelInterestUpdate
      file: ./src/mappings/consensusMappings.ts
