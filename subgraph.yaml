specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: ZDaiLoans
    network: ropsten
    source:
      startBlock: 7900000
      address: "0xe29e2fb8BE7d305Ef91AFB504bB2a7ef158849C1"
      abi: Loans
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Loan
        - LoanTerm
        - CollateralDeposit
        - CollateralWithdraw
        - LoanRepayment
        - Borrower
        - EthTransaction
      abis:
        - name: Loans
          file: ./abis/LoansInterface.json
      eventHandlers:
        - event: CollateralDeposited(indexed uint256,indexed address,uint256)
          handler: handleCollateralDeposited
        - event: CollateralWithdrawn(indexed uint256,indexed address,uint256)
          handler: handleCollateralWithdrawn
        - event: LoanTermsSet(indexed uint256,indexed address,address,uint256,uint256,uint256,uint256,uint256)
          handler: handleLoanTermsSet
        - event: LoanTakenOut(indexed uint256,indexed address,uint256)
          handler: handleLoanTakenOut
        - event: LoanRepaid(indexed address,indexed address,indexed uint256,uint256,uint256)
          handler: handleLoanRepaid
      file: ./src/mappings/loans/zdaiLoansMappings.ts
  - kind: ethereum/contract
    name: DaiLendingPoolInterface
    network: ropsten
    source:
      startBlock: 7900000
      address: "0x814BF532b28E0F126B1309BFDbd5f45787116c3D"
      abi: LendingPoolInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - TokenDeposited
        - TokenWithdrawn
        - TokenRepaid
        - PaymentLiquidated
      abis:
        - name: LendingPoolInterface
          file: ./abis/LendingPoolInterface.json
      eventHandlers:
        - event: TokenDeposited(indexed address,uint256)
          handler: handleTokenDeposited
        - event: TokenWithdrawn(indexed address,uint256)
          handler: handleTokenWithdrawn
        - event: TokenRepaid(indexed address,uint256)
          handler: handleDaiRepaid
        - event: PaymentLiquidated(indexed address,uint256)
          handler: handlePaymentLiquidated
      file: ./src/mappings/lendingPools/daiLendingPoolMappings.ts
  - kind: ethereum/contract
    name: InterestConsensusInterface
    network: ropsten
    source:
      startBlock: 7900000
      address: "0xC1A1EaBbA7b7Be9E77088bA5AcBD903A87704438"
      abi: InterestConsensusInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - InterestSubmitted
        - InterestAccepted
      abis:
        - name: InterestConsensusInterface
          file: ./abis/InterestConsensusInterface.json
      eventHandlers:
        - event: InterestSubmitted(address,address,uint256,uint256)
          handler: handleInterestSubmitted
        - event: InterestAccepted(address,uint256,uint256)
          handler: handleInterestAccepted
      file: ./src/mappings/interestConsensusMappings.ts
  - kind: ethereum/contract
    name: LendersInterface
    network: ropsten
    source:
      startBlock: 7900000
      address: "0x0Bb1f6c0A6CA2D863C5C94DAAA66c1b9e513B763"
      abi: LendersInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - AccruedInterestUpdated
        - AccruedInterestWithdrawn
        - InterestUpdateRequested
        - CancelInterestUpdate
      abis:
        - name: LendersInterface
          file: ./abis/LendersInterface.json
      eventHandlers:
        - event: AccruedInterestUpdated(indexed address,uint256,uint256)
          handler: handleAccruedInterestUpdated
        - event: AccruedInterestWithdrawn(indexed address,uint256)
          handler: handleAccruedInterestWithdrawn
        - event: InterestUpdateRequested(indexed address,uint256)
          handler: handleInterestUpdateRequested
        - event: CancelInterestUpdate(indexed address,uint256)
          handler: handleCancelInterestUpdate
      file: ./src/mappings/lendersMappings.ts
  - kind: ethereum/contract
    name: ZDAIToken
    network: ropsten
    source:
      startBlock: 7900000
      address: "0x31AAe6F9F77f63b2B64bdbc991a6D43E681594e8"
      abi: ZToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Transfer
        - Approval
        - MinterAdded
        - MinterRemoved
      abis:
        - name: ZToken
          file: ./abis/ZToken.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: MinterAdded(indexed address)
          handler: handleMinterAdded
        - event: MinterRemoved(indexed address)
          handler: handleMinterRemoved
      file: ./src/mappings/zTokens/zDaiMappings.ts
  - kind: ethereum/contract
    name: ZUSDCToken
    network: ropsten
    source:
      startBlock: 7900000
      address: "0xA77dC767BE7EFca53Adc4A9453FB1E8E3Febd41F"
      abi: ZToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Transfer
        - Approval
        - MinterAdded
        - MinterRemoved
      abis:
        - name: ZToken
          file: ./abis/ZToken.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
        - event: Approval(indexed address,indexed address,uint256)
          handler: handleApproval
        - event: MinterAdded(indexed address)
          handler: handleMinterAdded
        - event: MinterRemoved(indexed address)
          handler: handleMinterRemoved
      file: ./src/mappings/zTokens/zUSDCMappings.ts
  - kind: ethereum/contract
    name: SettingsInterface
    network: ropsten
    source:
      startBlock: 7900000
      address: "0xE0236a40Fe1613B73c7174C1D70e05650A6bb2e0"
      abi: SettingsInterface
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - SettingUpdated
        - LendingPoolPaused
        - LendingPoolUnpaused
      abis:
        - name: SettingsInterface
          file: ./abis/SettingsInterface.json
      eventHandlers:
        - event: SettingUpdated(indexed bytes32,indexed address,uint256,uint256)
          handler: handleSettingUpdated
        - event: LendingPoolPaused(indexed address,indexed address)
          handler: handleLendingPoolPaused
        - event: LendingPoolUnpaused(indexed address,indexed address)
          handler: handleLendingPoolUnpaused
      file: ./src/mappings/settingsMappings.ts
