# Settings / Consensus => Use ABI implementation
# Others => Use ABI interface

specVersion: 0.0.3
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: TellerDiamond
    network: {{network}}
    source:
      startBlock: {{startBlock}}
      address: '{{TellerDiamond}}'
      abi: ITellerDiamond
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Loan
        - LoanTerm
        - LoanTermsSet
        - CollateralDeposit
        - CollateralWithdraw
        - LoanRepayment
        - Liquidation
        - Borrower
        - EthTransaction
        - AssetSettingsStatus
        - AssetSettingsChange
        - PlatformSettingChange
        - PlatformSettingStatus
      abis:
        - name: ITellerDiamond
          file: ./abis/ITellerDiamond.json
        - name: ITToken
          file: ./abis/ITToken.json
      eventHandlers:
        - event: LoanTermsSet(indexed uint256,indexed address,indexed address)
          handler: loanTermsSet
        - event: LoanTakenOut(indexed uint256,indexed address,uint256,bool)
          handler: loanTakenOut
        - event: LoanRepaid(indexed uint256,indexed address,uint256,address,uint256)
          handler: loanRepaid
        - event: LoanLiquidated(indexed uint256,indexed address,address,uint256,uint256)
          handler: loanLiquidated
        - event: AssetSettingsCreated(indexed address,indexed bytes32,bytes32,uint8)
          handler: assetSettingsCreated
        - event: AssetSettingsUpdated(indexed address,indexed bytes32,bytes32,uint8)
          handler: assetSettingsUpdated
        - event: PlatformSettingCreated(indexed bytes32,indexed address,uint256,uint256,uint256)
          handler: platformSettingCreated
        - event: PlatformSettingUpdated(indexed bytes32,indexed address,uint256,uint256)
          handler: platformSettingUpdated
      file: ./src/mappings.ts
